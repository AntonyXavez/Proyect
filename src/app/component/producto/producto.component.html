<div class="container main-container">

  <div class="d-flex justify-content-between">
    <h2>Producto</h2>
    <div class="d-flex justify-content-between">
      <button class="btn btn-outline-danger"
              type="button" [routerLink]="['/productos']">
        <i class="fas fa-ban" style="margin-right: 5px;"></i> Cancelar
      </button>
    </div>
  </div>


  <hr>

  <div class="row">

    <div class="col-md-5">

      <form (ngSubmit)="guardarProducto()" #forma="ngForm" novalidate="">

        <div class="form-group"
             [ngClass]="{ 'has-danger' : name.errors?.minlength || name.errors?.patter || name.errors?.required && name.touched}">
          <label><strong>Nombre</strong></label>
          <input [(ngModel)]="product.name"
                 type="text" name="name"
                 class="form-control" pattern="^[a-zA-Z_-]+(?:\s+[a-zA-Z_-]+)*$"
                 placeholder="Nombre" autocomplete="off"
                 required minlength="4" #name="ngModel">
                 <br>
                 <div *ngIf="name.errors?.required && name.touched"
                      class="alert alert-danger form-control-feadback"
                      role="alert">
                  <strong>Este Campo es Requerido</strong>
                </div>
                 <div *ngIf="name.errors?.minlength"
                      class="alert alert-danger form-control-feadback"
                      role="alert">
                  <strong>Minimo {{ name.errors.minlength.requiredLength}} caracteres</strong>
                </div>

        </div>

        <div class="form-group"
             [ngClass]="{ 'has-danger' : price.errors?.minlength || price.errors?.required && price.touched }">
          <label><strong>Precio</strong></label>
          <div class="input-group">
            <span class="input-group-addon">$</span>
            <input [(ngModel)]="product.price" step="1"
                   type="number" name="price" min="0"
                   class="form-control"  autocomplete="off"
                   required minlength="1" #price="ngModel">
           </div>
           <br>
           <div *ngIf="price.errors?.required && price.touched"
           class="alert alert-danger form-control-feadback"
           role="alert">
           <strong>Este Campo es Requerido</strong>
         </div>
         <div *ngIf="price.errors?.minlength"
         class="alert alert-danger form-control-feadback"
         role="alert">
         <strong>Minimo {{ price.errors.minlength.requiredLength }} caracteres</strong>
       </div>

        </div>

        <div class="form-group"
             [ngClass]="{ 'has-danger' : brand.errors?.minlength || brand.errors?.required && brand.touched }">
          <label><strong>Marca</strong></label>
          <input [(ngModel)]="product.brand"
                 type="text" name="brand"
                 class="form-control" pattern="^[a-zA-Z_-]+(?:\s+[a-zA-Z_-]+)*$"
                 placeholder="Marca" autocomplete="off"
                 required minlength="4" #brand="ngModel">
                 <br>
                 <div *ngIf="brand.errors?.required && brand.touched"
                      class="alert alert-danger form-control-feadback"
                      role="alert">
                  <strong>Este Campo es Requerido</strong>
                </div>
                 <div *ngIf="brand.errors?.minlength"
                      class="alert alert-danger form-control-feadback"
                      role="alert">
                  <strong>Minimo {{ brand.errors.minlength.requiredLength}} caracteres</strong>
                </div>
        </div>

        <div class="form-group"
             [ngClass]="{ 'has-danger' : stock.errors?.minlength || stock.errors?.required && stock.touched }">
          <label><strong>Stock</strong></label>
            <input [(ngModel)]="product.stock" step="1"
                   type="number" name="stock" min="0"
                   class="form-control"  autocomplete="off"
                   required minlength="1" #stock="ngModel">
                 <br>
                 <div *ngIf="stock.errors?.required && stock.touched"
                      class="alert alert-danger form-control-feadback"
                      role="alert">
                  <strong>Este Campo es Requerido</strong>
                </div>
                <div *ngIf="stock.errors?.minlength"
                     class="alert alert-danger form-control-feadback"
                     role="alert">
                 <strong>Minimo {{ stock.errors.minlength.requiredLength }} caracteres</strong>
               </div>

        </div>

        <div class="form-group"
             [ngClass]="{ 'has-danger' : description.errors?.minlength || description.errors?.required && description.touched }">
          <label><strong>Descripción</strong></label>
          <input [(ngModel)]="product.description"
                 type="text" name="description"
                 class="form-control" pattern="^[a-zA-Z_-]+(?:\s+[a-zA-Z_-]+)*$"
                 placeholder="descripción" autocomplete="off"
                 required minlength="4" #description="ngModel">
                 <br>
                 <div *ngIf="description.errors?.required && description.touched"
                      class="alert alert-danger form-control-feadback"
                      role="alert">
                  <strong>Este Campo es Requerido</strong>
                </div>
                 <div *ngIf="description.errors?.minlength"
                      class="alert alert-danger form-control-feadback"
                      role="alert">
                  <strong>Minimo {{ description.errors.minlength.requiredLength}} caracteres</strong>
                </div>
        </div>

        <div class="form-group">
          <label><strong>Categoria</strong></label>
          <select class="form-control" [(ngModel)]="product.categoryId" name="category">
            <option *ngFor="let k of categoriesList | keys | sortingCompanies:path:1" [value]="k">
              {{ categoriesList[k].name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <button [disabled]="!forma.valid"
                  type="submit"
                  class="btn btn-outline-primary">
            Guardar
          </button>
        </div>

      </form>

    </div>

  </div>

</div>
